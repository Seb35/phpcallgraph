sed -i "s/    const VERSION = '0.7.0-pl1';/    const VERSION = '0.8.0';/" src/PHPCallGraph.php
svn ci src/PHPCallGraph.php -m '- Increased version number of phpCallGraph to 0.8.0'
# update readme.txt with latest options and argument documentation
aspell -l en_US -c readme.txt
svn ci readme.txt -m '- Updated readme.txt with latest options and argument documentation'
# update changelog using information from svn log https://phpcallgraph.svn.sourceforge.net/svnroot/phpcallgraph/trunk
aspell -l en_US -c changelog.txt
svn ci -m "- Updated changelog for the 0.8.0 release of phpCallGraph" changelog.txt
vim ../docs/release-notes.txt
aspell -l en_US -c ../docs/release-notes.txt
svn ci -m "- Added release notes for the 0.8.0 release of phpCallGraph" ../docs/release-notes.txt
svn export https://phpcallgraph.svn.sourceforge.net/svnroot/phpcallgraph/trunk phpcallgraph-0.8.0
cd phpcallgraph-0.8.0
rm -rf examples/PHPCallGraph-640x229.png examples/testfiles-640x206.png examples/ezcomponents* build.xml package.xml.php lib/umlgraph/UMLGraph-5.2.tar.gz test/PHPCallGraphCliTest.php test/output test/bug_* test/config.xml setup-env.sh examples/test-objectvar-invoke.sh examples/umlgraph-output/*.txt lib/umlgraph/build.sh
# check for new example files which may not be worth to be included in releases
find | sed 's/^.\///' | less
# run tests under Windows and Linux
cd ..
tar czf phpcallgraph-0.8.0.tar.gz phpcallgraph-0.8.0
zip -9 -r phpcallgraph-0.8.0.zip phpcallgraph-0.8.0
# add release `phpCallGraph v0.8.0' to package `phpCallGraph' at https://sourceforge.net/project/admin/explorer.php?group_id=204008
svn copy \
    https://phpcallgraph.svn.sourceforge.net/svnroot/phpcallgraph/trunk \
    https://phpcallgraph.svn.sourceforge.net/svnroot/phpcallgraph/tags/phpcallgraph-0.8.0 \
    -m "- Tagging the 0.8.0 release of phpCallGraph"
sed -i 's/-0.7.0-pl1/-0.8.0/' ../website/htdocs/index.html
pscp -sftp ../website/htdocs/index.html fakko,phpcallgraph@web.sf.net:/home/groups/p/ph/phpcallgraph/htdocs/
svn ci -m "- Added link to the 0.8.0 release of phpCallGraph to the website" ../website/htdocs/index.html
# submit news item at http://sourceforge.net/news/submit.php?group_id=204008
# write to the mailing list phpcallgraph-general@lists.sourceforge.net (include direct download links in the mail)


################################################################################
# small bugfix release
svn copy \
    https://phpcallgraph.svn.sourceforge.net/svnroot/phpcallgraph/tags/phpcallgraph-0.7.0 \
    https://phpcallgraph.svn.sourceforge.net/svnroot/phpcallgraph/tags/phpcallgraph-0.7.0-pl1 \
    -m "- Tagging the 0.7.0-pl1 release of phpCallGraph"
mkdir tags
cd tags
svn co https://phpcallgraph.svn.sourceforge.net/svnroot/phpcallgraph/tags/phpcallgraph-0.7.0-pl1
cd phpcallgraph-0.7.0-pl1
# apply patch e.g.
svn rm bin/phpcallgraph.bat
svn cp https://phpcallgraph.svn.sourceforge.net/svnroot/phpcallgraph/trunk/bin/phpcallgraph.bat bin/
svn ci -m "- Copying fixed file to the 0.7.0-pl1 release of phpCallGraph"
svn diff ../../trunk/src/PHPCallGraph.php
# increase version number in src/PHPCallGraph.php e.g. using vimdiff src/PHPCallGraph.php ../../trunk/src/PHPCallGraph.php
svn ci -m '- Increased version number of phpCallGraph to 0.7.0-pl1'
svn ci ../../trunk/src/PHPCallGraph.php  -m'- Increased version number of phpCallGraph to 0.7.0-pl1'
# update changelog in TRUNK using information from svn log https://phpcallgraph.svn.sourceforge.net/svnroot/phpcallgraph/trunk
svn ci -m "- Updating changelog for the 0.7.0-pl1 release of phpCallGraph"
svn rm changelog.txt
svn cp https://phpcallgraph.svn.sourceforge.net/svnroot/phpcallgraph/trunk/changelog.txt .
svn ci -m "- Copying changelog to the 0.7.0-pl1 release of phpCallGraph"
cd ../../..
# write release notes & check spelling
svn export https://phpcallgraph.svn.sourceforge.net/svnroot/phpcallgraph/tags/phpcallgraph-0.7.0-pl1 phpcallgraph-0.7.0-pl1 --force
cd  phpcallgraph-0.7.0-pl1
rm examples/PHPCallGraph-640x229.png examples/testfiles-640x206.png examples/ezcomponents*
# check for new example files which may not be worth to be included in releases
# run tests under Windows and Linux
rm lib/ezcomponents-instantsvc/components/setup-env.*
cd ..
tar czf phpcallgraph-0.7.0-pl1.tar.gz phpcallgraph-0.7.0-pl1
zip -r phpcallgraph-0.7.0-pl1.zip phpcallgraph-0.7.0-pl1
# add release `phpCallGraph v0.7.0-pl1' to package `phpCallGraph'
cd svn-working-copy
sed -i 's/-0.7.0/-0.7.0-pl1/' website/htdocs/index.html
pscp -sftp website/htdocs/index.html fakko,phpcallgraph@web.sf.net:/home/groups/p/ph/phpcallgraph/htdocs/
svn ci -m "- Added link to the 0.7.0-pl1 release of phpCallGraph to the website" website/htdocs/index.html
# submit news item at http://sourceforge.net/news/submit.php?group_id=204008
# write to the mailing list phpcallgraph-general@lists.sourceforge.net (include direct download links in the mail)
# rm -rf tags
